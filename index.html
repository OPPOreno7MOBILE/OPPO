<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>مسابقة OPPO</title>
  <style>
    body { font-family: Tahoma, sans-serif; background:#f5f5f5; margin:0; padding:0; }
    header { background: linear-gradient(135deg,#009e60,#007a4d); color:#fff; text-align:center; padding:20px; border-radius:0 0 20px 20px; }
    .btn { background:#009e60; color:#fff; border:none; padding:12px 18px; margin:10px; border-radius:30px; font-size:1rem; cursor:pointer; }
    .btn:hover { background:#007a4d; }
    .form-container, .participants-container {
      display:none;
      background:#fff;
      margin:20px;
      padding:20px;
      border-radius:15px;
      box-shadow:0 4px 10px rgba(0,0,0,0.1);
      text-align:center;
    }
    .form-container input { width:100%; padding:12px; margin:8px 0; border:1px solid #ddd; border-radius:8px; }
    .success { color:#009e60; font-weight:bold; margin-top:10px; }
    .error { color:red; font-weight:bold; margin-top:10px; }
    footer { text-align:center; padding:15px; background:#222; color:#aaa; font-size:0.9rem; margin-top:20px; }
    .whatsapp-btn {
      display:inline-flex;
      align-items:center;
      background:#25D366;
      color:#fff;
      padding:10px 16px;
      border-radius:30px;
      text-decoration:none;
      font-weight:bold;
      margin-top:10px;
    }
    .whatsapp-btn img {
      width:22px; height:22px; margin-left:8px;
    }
    .whatsapp-btn:hover { background:#1ebd5a; }
  </style>
</head>
<body>

  <header>
    <h1>اربح هاتف OPPO حديث</h1>
    <p>باشتراك رمزي 100 جنيه فقط</p>
    <p>المسابقة: 1/9/2025 - 7/9/2025</p>
    <p>عدد المشاركين: <strong id="count">5208</strong></p>
    <button class="btn" onclick="showForm()">📝 اشترك الآن</button>
    <button class="btn" onclick="showParticipants()">📋 عرض المشتركين</button>
  </header>

  <!-- فورم التسجيل -->
  <div class="form-container" id="form">
    <input type="text" id="name" placeholder="الاسم الثلاثي"><br>
    <input type="text" id="cash" placeholder="رقم الكاش"><br>
    <input type="text" id="whatsapp" placeholder="رقم الواتساب"><br>
    <input type="password" id="payment" placeholder="ادخل كود الدفع"><br>

    <!-- زر طلب كود الدفع عبر واتساب -->
    <a href="https://wa.me/201141310586?text=السلام+عليكم+اريد+كود+الدفع+للاشتراك+في+مسابقة+OPPO" 
       target="_blank" class="whatsapp-btn">
      <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp"> 
      اطلب كود الدفع
    </a><br><br>

    <button class="btn" onclick="submitForm()">✅ تأكيد الدفع والتسجيل</button>
    <p class="success" id="successMsg"></p>
    <p class="error" id="errorMsg"></p>
    <p id="countdown"></p>
  </div>

  <!-- عرض عدد المشاركين فقط -->
  <div class="participants-container" id="participants">
    <h2>📋 عدد المشاركين</h2>
    <p id="totalParticipants" style="font-size:1.2rem; font-weight:bold; color:#009e60;"></p>
    <p style="color:red; font-weight:bold;">❌ يمكن فقط لصاحب الشركة رؤية تفاصيل المشاركين</p>
    <button class="btn" onclick="backToForm()">⬅️ العودة للتسجيل</button>
  </div>

  <footer>
    حقوق النشر © 2025 | مسابقة OPPO
  </footer>

  <script>
    function showForm() {
      document.getElementById("form").style.display = "block";
      document.getElementById("participants").style.display = "none";
    }

    function showParticipants() {
      document.getElementById("form").style.display = "none";
      document.getElementById("participants").style.display = "block";

      const participants = JSON.parse(localStorage.getItem("participants")) || [];
      const total = 5208 + participants.length;
      document.getElementById("totalParticipants").innerText = `إجمالي المشاركين: ${total}`;
    }

    function backToForm() {
      showForm();
    }

    function submitForm() {
      const name = document.getElementById("name").value;
      const cash = document.getElementById("cash").value;
      const whatsapp = document.getElementById("whatsapp").value;
      const payment = document.getElementById("payment").value;

      const successMsg = document.getElementById("successMsg");
      const errorMsg = document.getElementById("errorMsg");

      successMsg.innerText = "";
      errorMsg.innerText = "";

      if (!name || !cash || !whatsapp || !payment) {
        errorMsg.innerText = "⚠️ من فضلك املأ كل البيانات كاملة.";
        return;
      }

      if (payment !== "1234") {
        errorMsg.innerText = "❌ لم يتم الدفع. برجاء طلب كود الدفع من واتساب.";
        return;
      }

      const participant = { name, cash, whatsapp };
      let participants = JSON.parse(localStorage.getItem("participants")) || [];
      participants.push(participant);
      localStorage.setItem("participants", JSON.stringify(participants));

      successMsg.innerText = "✅ تم التسجيل بنجاح!";
      document.getElementById("count").innerText = 5208 + participants.length;

      startCountdown();
    }

    function startCountdown() {
      const end = new Date("2025-09-07T00:00:00").getTime();
      const interval = setInterval(() => {
        const now = new Date().getTime();
        const distance = end - now;

        if (distance <= 0) {
          clearInterval(interval);
          document.getElementById("countdown").innerText = "انتهت المسابقة!";
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById("countdown").innerText =
          `⏳ الوقت المتبقي: ${days} يوم، ${hours} ساعة، ${minutes} دقيقة، ${seconds} ثانية`;
      }, 1000);
    }

    // إظهار الفورم عند أول تحميل
    showForm();
  </script>

</body>
</html>
